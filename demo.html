<!DOCTYPE html>
<html>
<head>
    <title>Reports Columns Tab - Browse Data Objects Button Demo</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #1e1e1e; color: #cccccc; }
        .form-row { margin-bottom: 15px; }
        .form-row label { display: block; margin-bottom: 5px; font-weight: bold; }
        .control-with-button { display: flex; gap: 4px; align-items: center; }
        .control-with-button input { flex: 1; min-width: 0; }
        .lookup-button { 
            background: #0e639c; 
            color: white; 
            border: none; 
            padding: 6px 10px; 
            cursor: pointer; 
            border-radius: 3px;
        }
        .lookup-button:hover { background: #1177bb; }
        .lookup-button:disabled { 
            background: #444; 
            color: #888; 
            cursor: not-allowed; 
        }
        .codicon { font-family: codicon; }
        .codicon-search:before { content: "üîç"; }
        input[type="text"] { 
            padding: 6px; 
            border: 1px solid #555; 
            background: #2d2d30; 
            color: #cccccc; 
            border-radius: 3px;
        }
        input[type="text"]:read-only { 
            background: #3c3c3c; 
            color: #999; 
        }
        input[type="checkbox"] { margin-left: 10px; }
        .demo-section { 
            border: 1px solid #555; 
            padding: 15px; 
            margin: 20px 0; 
            border-radius: 5px; 
        }
        .demo-title { 
            color: #569cd6; 
            font-size: 18px; 
            margin-bottom: 15px; 
        }
        .implementation-note {
            background: #0f2027;
            border-left: 4px solid #569cd6;
            padding: 10px;
            margin: 15px 0;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h1>Reports Webview - Columns Tab Enhancement</h1>
    <p><strong>Issue #245:</strong> Browse Data Objects button added to sourceObjectName setting in Reports columns tab</p>
    
    <div class="implementation-note">
        <strong>Implementation Summary:</strong> Added "Browse Data Objects" button with text filter functionality to the sourceObjectName field in Reports webview columns tab, following the exact same pattern as Forms webview.
    </div>

    <div class="demo-section">
        <div class="demo-title">üéØ New Feature: sourceObjectName with Browse Data Objects Button</div>
        
        <div class="form-row">
            <label for="columnSourceObjectName">Source Object Name:</label>
            <div class="control-with-button">
                <input type="text" id="columnSourceObjectName" name="sourceObjectName" value="" readonly>
                <button type="button" class="lookup-button" data-prop="sourceObjectName" data-field-id="columnSourceObjectName" disabled title="Browse Data Objects">
                    <span class="codicon codicon-search">üîç</span>
                </button>
            </div>
            <input type="checkbox" id="columnSourceObjectNameEditable" data-field-id="columnSourceObjectName" title="Toggle property existence" style="margin-left: 5px; transform: scale(0.8);">
        </div>
    </div>

    <div class="demo-section">
        <div class="demo-title">üìã Existing Feature: destinationTargetName with Browse for Page Button</div>
        
        <div class="form-row">
            <label for="columnDestinationTargetName">Destination Target Name:</label>
            <div class="control-with-button">
                <input type="text" id="columnDestinationTargetName" name="destinationTargetName" value="" readonly>
                <button type="button" class="lookup-button" data-prop="destinationTargetName" data-field-id="columnDestinationTargetName" disabled title="Browse for Page">
                    <span class="codicon codicon-search">üîç</span>
                </button>
            </div>
            <input type="checkbox" id="columnDestinationTargetNameEditable" data-field-id="columnDestinationTargetName" title="Toggle property existence" style="margin-left: 5px; transform: scale(0.8);">
        </div>
    </div>

    <div class="demo-section">
        <div class="demo-title">‚úÖ When Checkbox is Checked (Property Exists)</div>
        
        <div class="form-row">
            <label for="columnSourceObjectNameActive">Source Object Name:</label>
            <div class="control-with-button">
                <input type="text" id="columnSourceObjectNameActive" name="sourceObjectName" value="CustomerObject" style="background: #2d2d30; color: #cccccc;">
                <button type="button" class="lookup-button" data-prop="sourceObjectName" data-field-id="columnSourceObjectNameActive" title="Browse Data Objects">
                    <span class="codicon codicon-search">üîç</span>
                </button>
            </div>
            <input type="checkbox" id="columnSourceObjectNameActiveEditable" data-field-id="columnSourceObjectNameActive" title="Toggle property existence" style="margin-left: 5px; transform: scale(0.8);" checked>
        </div>
    </div>

    <h2>üîç Browse Data Objects Modal</h2>
    <div class="demo-section">
        <div class="demo-title">Modal Features</div>
        <ul>
            <li><strong>Text Filter:</strong> Filter data objects by name (case-insensitive)</li>
            <li><strong>Data Source:</strong> Lists all data objects from modelService.getAllObjects()</li>
            <li><strong>Selection:</strong> Click to select, double-click or Enter to confirm</li>
            <li><strong>Validation:</strong> Accept button only enabled when selection is made</li>
            <li><strong>Integration:</strong> Updates sourceObjectName field value on selection</li>
        </ul>
    </div>

    <h2>üìÅ Files Modified/Created</h2>
    <div class="demo-section">
        <div class="demo-title">Implementation Changes</div>
        <ul>
            <li><strong>Created:</strong> dataObjectSearchModalTemplate.js</li>
            <li><strong>Created:</strong> dataObjectSearchModalFunctionality.js</li>
            <li><strong>Modified:</strong> detailsViewGenerator.js (added allDataObjects parameter)</li>
            <li><strong>Modified:</strong> reportDetailsView.js (added getAllObjects() call)</li>
            <li><strong>Modified:</strong> clientScriptTemplate.js (added modal imports and functionality)</li>
            <li><strong>Modified:</strong> columnsListTemplate.js (added browse button for sourceObjectName)</li>
            <li><strong>Modified:</strong> columnsTableTemplate.js (added browse button for sourceObjectName)</li>
            <li><strong>Modified:</strong> domInitialization.js (added sourceObjectName click handling)</li>
            <li><strong>Modified:</strong> columnManagementFunctions.js (added browse button state management)</li>
        </ul>
    </div>

    <div class="implementation-note">
        <strong>Pattern Consistency:</strong> This implementation follows the exact same pattern established for Forms webview sourceObjectName and fkObjectName fields, ensuring UI consistency across the application.
    </div>

    <script>
        // Demo functionality to show button state changes
        document.getElementById('columnSourceObjectNameEditable').addEventListener('change', function() {
            const input = document.getElementById('columnSourceObjectName');
            const button = input.nextElementSibling;
            
            if (this.checked) {
                input.readOnly = false;
                input.style.background = '#2d2d30';
                input.style.color = '#cccccc';
                button.disabled = false;
            } else {
                input.readOnly = true;
                input.style.background = '#3c3c3c';
                input.style.color = '#999';
                button.disabled = true;
            }
        });

        // Demo click handler
        document.querySelectorAll('.lookup-button[data-prop="sourceObjectName"]').forEach(button => {
            button.addEventListener('click', function() {
                if (!this.disabled) {
                    alert('Browse Data Objects modal would open here!\n\nFeatures:\n‚Ä¢ Text filter for data objects\n‚Ä¢ List of all available data objects\n‚Ä¢ Select and confirm to update field');
                }
            });
        });
    </script>

</body>
</html>